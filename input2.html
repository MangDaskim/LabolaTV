<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Form Input Pertandingan</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-4 sm:p-8">

  <div class="max-w-xl mx-auto space-y-4">
    <h1 class="text-2xl font-bold mb-4">Form Input Pertandingan</h1>

    <!-- Time & Date -->
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label>Jam Tayang</label>
        <input id="match-time" type="time" class="w-full p-2 bg-gray-700 rounded" placeholder="Contoh: 22:42" />
      </div>
      <div>
        <label>Tanggal</label>
        <input id="match-date" type="date" class="w-full p-2 bg-gray-700 rounded" />
      </div>
    </div>

    <!-- Team 1 -->
    <div class="mb-4 relative">
      <label class="block mb-1">Nama Tim 1</label>
      <input type="text" id="team1-name" class="w-full p-2 bg-gray-700 rounded" placeholder="Contoh: Real Valladolid" oninput="showSuggestions(this, 'team1-name')">
      <ul id="suggestions-team1-name" class="absolute bg-gray-800 border border-gray-600 mt-1 rounded z-10 w-full hidden"></ul>
    </div>
    <div class="mb-4 relative">
      <label class="block mb-1">Logo Tim 1 (URL)</label>
      <input type="url" id="team1-logo" class="w-full p-2 bg-gray-700 rounded" placeholder="Contoh: https://link-logo1.png" oninput="showSuggestions(this, 'team1-logo')">
      <ul id="suggestions-team1-logo" class="absolute bg-gray-800 border border-gray-600 mt-1 rounded z-10 w-full hidden"></ul>
    </div>

    <!-- Team 2 -->
    <div class="mb-4 relative">
      <label class="block mb-1">Nama Tim 2</label>
      <input type="text" id="team2-name" class="w-full p-2 bg-gray-700 rounded" placeholder="Contoh: Girona FC" oninput="showSuggestions(this, 'team2-name')">
      <ul id="suggestions-team2-name" class="absolute bg-gray-800 border border-gray-600 mt-1 rounded z-10 w-full hidden"></ul>
    </div>
    <div class="mb-4 relative">
      <label class="block mb-1">Logo Tim 2 (URL)</label>
      <input type="url" id="team2-logo" class="w-full p-2 bg-gray-700 rounded" placeholder="Contoh: https://link-logo2.png" oninput="showSuggestions(this, 'team2-logo')">
      <ul id="suggestions-team2-logo" class="absolute bg-gray-800 border border-gray-600 mt-1 rounded z-10 w-full hidden"></ul>
    </div>

    <!-- Play Buttons -->
    <div id="play-buttons-container" class="mb-4 space-y-2">
      <label class="block">Link Play</label>
      <input type="url" class="play-url w-full p-2 bg-gray-700 rounded" placeholder="Contoh: https://link-play.com" />
    </div>
    <button onclick="addPlayButton()" class="bg-blue-700 px-4 py-1 rounded hover:bg-blue-800">Tambah Tombol Play</button>

    <!-- Action Buttons -->
    <div class="flex gap-2 mt-4">
      <button onclick="generateHTML()" class="bg-green-600 px-4 py-2 rounded hover:bg-green-700">Submit</button>
      <button onclick="copyToClipboard()" class="bg-yellow-500 px-4 py-2 rounded hover:bg-yellow-600">Copy</button>
      <button onclick="resetForm()" class="bg-red-600 px-4 py-2 rounded hover:bg-red-700">Reset</button>
    </div>
    <div id="copy-msg" class="text-green-400 hidden text-sm mt-1">âœ… HTML berhasil disalin.</div>

    <!-- Output -->
    <textarea id="output" rows="10" class="w-full p-2 mt-4 bg-gray-800 text-white rounded" placeholder="Hasil HTML akan muncul di sini..." readonly></textarea>
  </div>

  <script>
    function saveToLocalStorage(key, value) {
      let data = JSON.parse(localStorage.getItem(key)) || [];
      if (!data.includes(value)) {
        data.push(value);
        localStorage.setItem(key, JSON.stringify(data));
      }
    }

    function showSuggestions(inputElem, key) {
      const suggestionsBox = document.getElementById(`suggestions-${key}`);
      const query = inputElem.value.toLowerCase();
      const stored = JSON.parse(localStorage.getItem(key)) || [];
      const filtered = stored.filter(val => val.toLowerCase().includes(query));
      
      suggestionsBox.innerHTML = "";
      if (filtered.length > 0 && query.length > 0) {
        filtered.forEach(item => {
          const li = document.createElement("li");
          li.textContent = item;
          li.className = "px-3 py-1 hover:bg-gray-700 cursor-pointer";
          li.onclick = () => {
            inputElem.value = item;
            suggestionsBox.classList.add("hidden");
          };
          suggestionsBox.appendChild(li);
        });
        suggestionsBox.classList.remove("hidden");
      } else {
        suggestionsBox.classList.add("hidden");
      }
    }

    function generateHTML() {
      const time = document.getElementById("match-time").value;
      const date = document.getElementById("match-date").value;
      const team1 = document.getElementById("team1-name").value;
      const team1Logo = document.getElementById("team1-logo").value;
      const team2 = document.getElementById("team2-name").value;
      const team2Logo = document.getElementById("team2-logo").value;
      const playUrls = Array.from(document.getElementsByClassName("play-url")).map(input => input.value).filter(url => url !== "");

      if (!time || !date || !team1 || !team1Logo || !team2 || !team2Logo || playUrls.length === 0) {
        alert("Semua data wajib diisi, termasuk minimal 1 tombol Play.");
        return;
      }

      saveToLocalStorage("team1-name", team1);
      saveToLocalStorage("team1-logo", team1Logo);
      saveToLocalStorage("team2-name", team2);
      saveToLocalStorage("team2-logo", team2Logo);

      let html = `
<div class="match-container">
  <div class="match-header">
    <span class="match-time" data-start="${time}" data-date="${date}">${time}</span>
    <span class="match-countdown"></span>
  </div>

  <div class="match-body">
    <div class="team-row">
      <div class="team-left">
        <img src="${team1Logo}" class="team-logo" alt="Team 1" />
        <span class="team-name">${team1}</span>
      </div>
      <button class="watch-button">TONTON</button>
    </div>

    <div class="team-row">
      <div class="team-left">
        <img src="${team2Logo}" class="team-logo" alt="Team 2" />
        <span class="team-name">${team2}</span>
      </div>
    </div>

    <div class="play-buttons">
      ${playUrls.map((url, i) => `<button onclick="window.location.href='${url}';">Play ${i + 1}</button>`).join("\n      ")}
    </div>
  </div>
</div>
      `.trim();

      document.getElementById("output").value = html;
      document.getElementById("copy-msg").classList.add("hidden");
    }

    function copyToClipboard() {
      const output = document.getElementById("output");
      output.select();
      output.setSelectionRange(0, 99999);
      document.execCommand("copy");
      document.getElementById("copy-msg").classList.remove("hidden");
    }

    function resetForm() {
      document.querySelectorAll("input").forEach(input => input.value = "");
      document.getElementById("output").value = "";
      document.getElementById("copy-msg").classList.add("hidden");

      // Reset play buttons
      const container = document.getElementById("play-buttons-container");
      container.innerHTML = `<label class="block">Link Play</label>
      <input type="url" class="play-url w-full p-2 bg-gray-700 rounded" placeholder="Contoh: https://link-play.com" />`;
    }

    function addPlayButton() {
      const container = document.getElementById("play-buttons-container");
      const input = document.createElement("input");
      input.type = "url";
      input.placeholder = "Contoh: https://link-play.com";
      input.className = "play-url w-full p-2 bg-gray-700 rounded";
      container.appendChild(input);
    }
  </script>

</body>
</html>
